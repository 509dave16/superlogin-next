'use strict';var BPromise=require('bluebird'),fs=BPromise.promisifyAll(require('fs-extra')),path=require('path');function FileAdapter(a){var b=a.getItem('session.file.sessionsRoot');this._sessionFolder=path.join(process.env.PWD,b),console.log('File Adapter loaded')}module.exports=FileAdapter,FileAdapter.prototype._getFilepath=function(a){return path.format({dir:this._sessionFolder,base:a+'.json'})},FileAdapter.prototype.storeKey=function(a,b,c){var d=Date.now();return fs.outputJsonAsync(this._getFilepath(a),{data:c,expire:d+b})},FileAdapter.prototype.getKey=function(a){var b=Date.now();return fs.readJsonAsync(this._getFilepath(a)).then(function(a){return!!(a.expire>b)&&a.data}).catch(function(){return!1})},FileAdapter.prototype.deleteKeys=function(a){a instanceof Array||(a=[a]);var b=this,c=a.map(function(a){return fs.removeAsync(b._getFilepath(a))});return BPromise.all(c).then(function(a){return a.length})},FileAdapter.prototype.quit=function(){return BPromise.resolve()},FileAdapter.prototype._removeExpired=function(){};