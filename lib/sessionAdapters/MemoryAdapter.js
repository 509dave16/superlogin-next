'use strict';var BPromise=require('bluebird');function MemoryAdapter(){this._keys={},this._expires={},console.log('Memory Adapter loaded')}module.exports=MemoryAdapter,MemoryAdapter.prototype.storeKey=function(a,b,c){var d=Date.now();return this._keys[a]=c,this._expires[a]=d+b,this._removeExpired(),BPromise.resolve()},MemoryAdapter.prototype.getKey=function(a){var b=Date.now();return this._keys[a]&&this._expires[a]>b?BPromise.resolve(this._keys[a]):BPromise.resolve(!1)},MemoryAdapter.prototype.deleteKeys=function(a){a instanceof Array||(a=[a]);var b=this;return a.forEach(function(a){delete b._keys[a],delete b._expires[a]}),this._removeExpired(),BPromise.resolve(a.length)},MemoryAdapter.prototype.quit=function(){return BPromise.resolve()},MemoryAdapter.prototype._removeExpired=function(){var a=Date.now(),b=this;Object.keys(this._expires).forEach(function(c){b._expires[c]<a&&(delete b._keys[c],delete b._expires[c])})};