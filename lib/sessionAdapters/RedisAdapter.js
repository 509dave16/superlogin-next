'use strict';var BPromise=require('bluebird'),redis=BPromise.promisifyAll(require('redis'));function RedisAdapter(a){var b;b=a.getItem('session.redis.unix_socket')?redis.createClient(a.getItem('session.redis.unix_socket'),a.getItem('session.redis.options')):a.getItem('session.redis.url')?redis.createClient(a.getItem('session.redis.url'),a.getItem('session.redis.options')):redis.createClient(a.getItem('session.redis.port')||6379,a.getItem('session.redis.host')||'127.0.0.1',a.getItem('session.redis.options')),a.getItem('session.redis.password')&&b.authAsync(a.getItem('session.redis.password')).catch(function(a){throw new Error(a)}),b.on('error',function(a){console.error('Redis error: '+a)}),b.on('connect',function(){console.log('Redis is ready')}),this._redisClient=b}module.exports=RedisAdapter,RedisAdapter.prototype.storeKey=function(a,b,c){return this._redisClient.psetexAsync(a,b,c)},RedisAdapter.prototype.deleteKeys=function(a){return this._redisClient.delAsync(a)},RedisAdapter.prototype.getKey=function(a){return this._redisClient.getAsync(a)},RedisAdapter.prototype.quit=function(){return this._redisClient.quit()};